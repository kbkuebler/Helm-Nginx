---
# templates/configmap-grafana-dashboard.yaml
{{- if .Values.dashboards.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "hammerspace-monitoring.fullname" . }}-dashboards
  labels:
    app: {{ include "hammerspace-monitoring.name" . }}
    component: grafana
    grafana_dashboard: "1"
data:
  {{- range $key, $dashboard := .Values.grafana.dashboards }}
  {{ $dashboard.filename }}: |
{{ $.Files.Get $dashboard.path | indent 4 }}
  {{- end }}
{{- end }}
